{"ast":null,"code":"const OriginalCursor = require('@seald-io/nedb/lib/cursor');\n\n/**\n * @class\n */\nclass Cursor {\n  constructor(datastore, op, ...args) {\n    const cursor = datastore.__original[op](...args);\n    if (!(cursor instanceof OriginalCursor)) {\n      throw new TypeError(`Unexpected ${typeof original}, expected: Cursor (nedb/lib/cursor)`);\n    }\n    Object.defineProperties(this, {\n      __original: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: cursor\n      },\n      __datastore: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: datastore\n      },\n      __op: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: op\n      },\n      __args: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: args\n      }\n    });\n  }\n\n  /**\n   * Sort the queried documents.\n   *\n   * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n   * \n   * @return {Cursor}\n   */\n  sort(...args) {\n    this.__original.sort(...args);\n    return this;\n  }\n\n  /**\n   * Skip some of the queried documents.\n   *\n   * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n   * \n   * @return {Cursor}\n   */\n  skip(...args) {\n    this.__original.skip(...args);\n    return this;\n  }\n\n  /**\n   * Limit the queried documents.\n   *\n   * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n   * \n   * @return {Cursor}\n   */\n  limit(...args) {\n    this.__original.limit(...args);\n    return this;\n  }\n\n  /**\n   * Set the document projection.\n   * \n   * See: https://github.com/louischatriot/nedb#projections\n   * \n   * @return {Cursor}\n   */\n  project(...args) {\n    this.__original.projection(...args);\n    return this;\n  }\n\n  /**\n   * Execute the cursor.\n   *\n   * Since the Cursor has a `then` and a `catch` method\n   * JavaScript identifies it as a thenable object\n   * thus you can await it in async functions.\n   *\n   * @example\n   * // in an async function\n   * await datastore.find(...)\n   *  .sort(...)\n   *  .limit(...)\n   *\n   * @example\n   * // the previous is the same as:\n   * await datastore.find(...)\n   *  .sort(...)\n   *  .limit(...)\n   *  .exec()\n   * \n   * @return {Promise<Object[]>}\n   */\n  async exec() {\n    await this.__datastore.load();\n    try {\n      const result = await this.__original.execAsync();\n      this.__datastore.broadcastSuccess(this.__op, result, ...this.__args);\n      return result;\n    } catch (error) {\n      this.__datastore.broadcastError(this.__op, error, ...this.__args);\n      throw error;\n    }\n  }\n\n  /**\n   * Execute the cursor and set promise callbacks.\n   * \n   * For more information visit:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n   * \n   * @param  {Function} fulfilled\n   * @param  {Function} [rejected]\n   * @return {Promise}\n   */\n  then(fulfilled, rejected) {\n    return this.exec().then(fulfilled, rejected);\n  }\n\n  /**\n   * Execute the cursor and set promise error callback.\n   *\n   * For more information visit:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n   * \n   * @param  {Function} rejected\n   * @return {Promise}\n   */\n  catch(rejected) {\n    return this.exec().catch(rejected);\n  }\n}\nmodule.exports = Cursor;","map":{"version":3,"names":["OriginalCursor","require","Cursor","constructor","datastore","op","args","cursor","__original","TypeError","original","Object","defineProperties","configurable","enumerable","writable","value","__datastore","__op","__args","sort","skip","limit","project","projection","exec","load","result","execAsync","broadcastSuccess","error","broadcastError","then","fulfilled","rejected","catch","module","exports"],"sources":["C:/Users/benit/Music/arbisout/node_modules/nedb-promises/src/Cursor.js"],"sourcesContent":["const OriginalCursor = require('@seald-io/nedb/lib/cursor');\n\n/**\n * @class\n */\nclass Cursor {\n    constructor(datastore, op, ...args) {\n        const cursor = datastore.__original[op](...args);\n        if (!(cursor instanceof OriginalCursor)) {\n            throw new TypeError(`Unexpected ${typeof original}, expected: Cursor (nedb/lib/cursor)`);\n        }\n\n        Object.defineProperties(this, {\n            __original: {\n                configurable: false,\n                enumerable: false,\n                writable: false,\n                value: cursor,\n            },\n\n            __datastore: {\n                configurable: false,\n                enumerable: false,\n                writable: false,\n                value: datastore,\n            },\n\n            __op: {\n                configurable: false,\n                enumerable: false,\n                writable: false,\n                value: op,\n            },\n\n            __args: {\n                configurable: false,\n                enumerable: false,\n                writable: false,\n                value: args,\n            },\n        });\n    }\n\n    /**\n     * Sort the queried documents.\n     *\n     * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n     * \n     * @return {Cursor}\n     */\n    sort(...args) {\n        this.__original.sort(...args);\n        return this;\n    }\n\n    /**\n     * Skip some of the queried documents.\n     *\n     * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n     * \n     * @return {Cursor}\n     */\n    skip(...args) {\n        this.__original.skip(...args);\n        return this;\n    }\n\n    /**\n     * Limit the queried documents.\n     *\n     * See: https://github.com/louischatriot/nedb#sorting-and-paginating\n     * \n     * @return {Cursor}\n     */\n    limit(...args) {\n        this.__original.limit(...args);\n        return this;\n    }\n\n    /**\n     * Set the document projection.\n     * \n     * See: https://github.com/louischatriot/nedb#projections\n     * \n     * @return {Cursor}\n     */\n    project(...args) {\n        this.__original.projection(...args);\n        return this;\n    }\n\n    /**\n     * Execute the cursor.\n     *\n     * Since the Cursor has a `then` and a `catch` method\n     * JavaScript identifies it as a thenable object\n     * thus you can await it in async functions.\n     *\n     * @example\n     * // in an async function\n     * await datastore.find(...)\n     *  .sort(...)\n     *  .limit(...)\n     *\n     * @example\n     * // the previous is the same as:\n     * await datastore.find(...)\n     *  .sort(...)\n     *  .limit(...)\n     *  .exec()\n     * \n     * @return {Promise<Object[]>}\n     */\n    async exec() {\n        await this.__datastore.load();\n        try {\n            const result = await this.__original.execAsync();\n            this.__datastore.broadcastSuccess(this.__op, result, ...this.__args);\n            return result;\n        } catch (error) {\n            this.__datastore.broadcastError(this.__op, error, ...this.__args);\n            throw error;\n        }\n    }\n\n    /**\n     * Execute the cursor and set promise callbacks.\n     * \n     * For more information visit:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n     * \n     * @param  {Function} fulfilled\n     * @param  {Function} [rejected]\n     * @return {Promise}\n     */\n    then(fulfilled, rejected) {\n        return this.exec().then(fulfilled, rejected);\n    }\n\n    /**\n     * Execute the cursor and set promise error callback.\n     *\n     * For more information visit:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n     * \n     * @param  {Function} rejected\n     * @return {Promise}\n     */\n    catch(rejected) {\n        return this.exec().catch(rejected);\n    }\n}\n\nmodule.exports = Cursor;\n"],"mappings":"AAAA,MAAMA,cAAc,GAAGC,OAAO,CAAC,2BAA2B,CAAC;;AAE3D;AACA;AACA;AACA,MAAMC,MAAM,CAAC;EACTC,WAAWA,CAACC,SAAS,EAAEC,EAAE,EAAE,GAAGC,IAAI,EAAE;IAChC,MAAMC,MAAM,GAAGH,SAAS,CAACI,UAAU,CAACH,EAAE,CAAC,CAAC,GAAGC,IAAI,CAAC;IAChD,IAAI,EAAEC,MAAM,YAAYP,cAAc,CAAC,EAAE;MACrC,MAAM,IAAIS,SAAS,CAAC,cAAc,OAAOC,QAAQ,sCAAsC,CAAC;IAC5F;IAEAC,MAAM,CAACC,gBAAgB,CAAC,IAAI,EAAE;MAC1BJ,UAAU,EAAE;QACRK,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,KAAK;QACjBC,QAAQ,EAAE,KAAK;QACfC,KAAK,EAAET;MACX,CAAC;MAEDU,WAAW,EAAE;QACTJ,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,KAAK;QACjBC,QAAQ,EAAE,KAAK;QACfC,KAAK,EAAEZ;MACX,CAAC;MAEDc,IAAI,EAAE;QACFL,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,KAAK;QACjBC,QAAQ,EAAE,KAAK;QACfC,KAAK,EAAEX;MACX,CAAC;MAEDc,MAAM,EAAE;QACJN,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,KAAK;QACjBC,QAAQ,EAAE,KAAK;QACfC,KAAK,EAAEV;MACX;IACJ,CAAC,CAAC;EACN;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIc,IAAIA,CAAC,GAAGd,IAAI,EAAE;IACV,IAAI,CAACE,UAAU,CAACY,IAAI,CAAC,GAAGd,IAAI,CAAC;IAC7B,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIe,IAAIA,CAAC,GAAGf,IAAI,EAAE;IACV,IAAI,CAACE,UAAU,CAACa,IAAI,CAAC,GAAGf,IAAI,CAAC;IAC7B,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIgB,KAAKA,CAAC,GAAGhB,IAAI,EAAE;IACX,IAAI,CAACE,UAAU,CAACc,KAAK,CAAC,GAAGhB,IAAI,CAAC;IAC9B,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIiB,OAAOA,CAAC,GAAGjB,IAAI,EAAE;IACb,IAAI,CAACE,UAAU,CAACgB,UAAU,CAAC,GAAGlB,IAAI,CAAC;IACnC,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMmB,IAAIA,CAAA,EAAG;IACT,MAAM,IAAI,CAACR,WAAW,CAACS,IAAI,CAAC,CAAC;IAC7B,IAAI;MACA,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACnB,UAAU,CAACoB,SAAS,CAAC,CAAC;MAChD,IAAI,CAACX,WAAW,CAACY,gBAAgB,CAAC,IAAI,CAACX,IAAI,EAAES,MAAM,EAAE,GAAG,IAAI,CAACR,MAAM,CAAC;MACpE,OAAOQ,MAAM;IACjB,CAAC,CAAC,OAAOG,KAAK,EAAE;MACZ,IAAI,CAACb,WAAW,CAACc,cAAc,CAAC,IAAI,CAACb,IAAI,EAAEY,KAAK,EAAE,GAAG,IAAI,CAACX,MAAM,CAAC;MACjE,MAAMW,KAAK;IACf;EACJ;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,IAAIA,CAACC,SAAS,EAAEC,QAAQ,EAAE;IACtB,OAAO,IAAI,CAACT,IAAI,CAAC,CAAC,CAACO,IAAI,CAACC,SAAS,EAAEC,QAAQ,CAAC;EAChD;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,KAAKA,CAACD,QAAQ,EAAE;IACZ,OAAO,IAAI,CAACT,IAAI,CAAC,CAAC,CAACU,KAAK,CAACD,QAAQ,CAAC;EACtC;AACJ;AAEAE,MAAM,CAACC,OAAO,GAAGnC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}